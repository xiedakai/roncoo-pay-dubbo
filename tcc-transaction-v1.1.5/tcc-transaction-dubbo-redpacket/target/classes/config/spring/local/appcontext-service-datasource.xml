<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:aop="http://www.springframework.org/schema/aop" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

	<!-- ======================================================================== -->
	<!-- é¾™æžœå­¦é™¢ (www.roncoo.com) è¶…çº§æ•™ç¨‹ç³»åˆ— -->
	<!-- ã€Šå¾®æœåŠ¡æž¶æž„çš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‹è§†é¢‘æ•™ç¨? -->
	<!-- è®²å¸ˆï¼šå´æ°´æˆï¼ˆæ°´åˆ°æ¸ æˆï¼‰ï¼?840765167@qq.com -->
	<!-- è¯¾ç¨‹åœ°å€ï¼šhttp://www.roncoo.com/course/view/7ae3d7eddc4742f78b0548aa8bd9ccdb -->
	<!-- ======================================================================== -->

    <util:properties id="jdbc" location="classpath:jdbc.properties"/>

    <bean id="redPacketDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
          destroy-method="close" lazy-init="false">
        <property name="driverClass" value="#{jdbc['jdbc.driverClassName']}"/>
        <property name="jdbcUrl" value="#{jdbc['jdbc.url']}"/>
        <property name="user" value="#{jdbc['jdbc.username']}"/>
        <property name="password" value="#{jdbc['jdbc.password']}"/>
        <property name="initialPoolSize" value="#{jdbc['c3p0.initialPoolSize']}"/>
        <property name="minPoolSize" value="#{jdbc['c3p0.minPoolSize']}"/>
        <property name="maxPoolSize" value="#{jdbc['c3p0.maxPoolSize']}"/>
        <property name="acquireIncrement" value="#{jdbc['c3p0.acquireIncrement']}"/>
        <property name="maxIdleTime" value="#{jdbc['c3p0.maxIdleTime']}"/>
        <property name="checkoutTimeout" value="#{jdbc['c3p0.checkoutTimeout']}"/>
    </bean>

    <bean id="tccDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
          destroy-method="close" lazy-init="false">
        <property name="driverClass" value="#{jdbc['jdbc.driverClassName']}"/>
        <property name="jdbcUrl" value="#{jdbc['tcc.jdbc.url']}"/>
        <property name="user" value="#{jdbc['jdbc.username']}"/>
        <property name="password" value="#{jdbc['jdbc.password']}"/>
        <property name="initialPoolSize" value="#{jdbc['c3p0.initialPoolSize']}"/>
        <property name="minPoolSize" value="#{jdbc['c3p0.minPoolSize']}"/>
        <property name="maxPoolSize" value="#{jdbc['c3p0.maxPoolSize']}"/>
        <property name="acquireIncrement" value="#{jdbc['c3p0.acquireIncrement']}"/>
        <property name="maxIdleTime" value="#{jdbc['c3p0.maxIdleTime']}"/>
        <property name="checkoutTimeout" value="#{jdbc['c3p0.checkoutTimeout']}"/>
    </bean>

    <bean id="transactionManager"
          class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="redPacketDataSource"/>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" order="2"/>

    <!-- <aop:aspectj-autoproxy proxy-target-class="true"/> -->

</beans>